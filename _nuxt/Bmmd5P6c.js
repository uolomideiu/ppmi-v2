import{_ as P}from"./CTOGX64A.js";import{h as T,l as C,s as N,r as k,v as g,c as n,o as l,g as d,x as _,d as e,a as M,y as p,z as v,q as c,b as V,e as S,t as f,u as y,F as h,p as $}from"./BtdstHtp.js";const I={class:"input-group"},j={class:"input-group"},B={class:"input-group"},O={class:"input-group"},A={key:0,class:"rvt-m-left-sm spinner"},L={key:1,class:"confirmation",id:"confirmation",ref:"confirmation"},U={class:"rvt-table-stripes rvt-m-tb-md rvt-table-cells"},D={scope:"row",class:"rvt-text-medium"},R={key:2,class:"rvt-alert rvt-alert--danger [ rvt-m-top-md ]",role:"alert","aria-labelledby":"error-alert-title","data-rvt-alert":"error"},q={class:"rvt-alert__message"},z={__name:"Contact",setup(J){C(()=>{N().$recaptcha.init()});const x=k(null),m=k(!1),r=g({status:"",message:"",data:null}),a=g({FormType:"Contact",Name:"",Phone:"",Email:"",Message:""}),i=g({Name:!0,Phone:!0,Email:!0,Message:!0}),u=s=>{i[s]=!!a[s]},w=async()=>{if(Object.keys(a).forEach(u),Object.values(i).every(s=>s)){m.value=!0;try{const t=await(await fetch("ppmi-api/contact.php",{method:"POST",headers:{"Content-Type":"application/json","X-Recaptcha-Token":await N().$recaptcha.execute("submit")},body:JSON.stringify(a)})).json();r.status=t.status,r.message=t.message,r.data=t.data,m.value=!1,t.status==="success"&&(E(),x.value.scrollIntoView({behavior:"smooth",block:"start"}))}catch(s){m.value=!1,console.error("Failed to submit form:",s)}}else await new Promise(s=>setTimeout(s,0)),alert("Some required fields were left blank. Please fill out remaining fields highlighted in red.")},E=()=>{Object.keys(a).forEach(s=>{["FormType"].includes(s)||(a[s]="",i[s]=!0)})};return(s,t)=>{const F=P;return l(),n(h,null,[r.status!=="success"?(l(),n("form",{key:0,class:"form",ref_key:"formRef",ref:x,onSubmit:_(w,["prevent"])},[e("div",I,[t[8]||(t[8]=e("label",{for:"name",class:"rvt-label"},"Name",-1)),p(e("input",{type:"text",id:"name",class:c(["rvt-text-input",{"rvt-validation-danger":!i.Name}]),"onUpdate:modelValue":t[0]||(t[0]=o=>a.Name=o),name:"Name",onInput:t[1]||(t[1]=o=>u("Name"))},null,34),[[v,a.Name]])]),e("div",j,[t[9]||(t[9]=e("label",{for:"phone",class:"rvt-label"},"Phone",-1)),p(e("input",{type:"tel",id:"phone",class:c(["rvt-text-input",{"rvt-validation-danger":!i.Phone}]),"onUpdate:modelValue":t[2]||(t[2]=o=>a.Phone=o),name:"Phone",onInput:t[3]||(t[3]=o=>u("Phone"))},null,34),[[v,a.Phone]])]),e("div",B,[t[10]||(t[10]=e("label",{for:"email",class:"rvt-label"},"Email",-1)),p(e("input",{type:"email",id:"email",class:c(["rvt-text-input",{"rvt-validation-danger":!i.Email}]),"onUpdate:modelValue":t[4]||(t[4]=o=>a.Email=o),name:"Email",onInput:t[5]||(t[5]=o=>u("Email"))},null,34),[[v,a.Email]])]),e("div",O,[t[11]||(t[11]=e("label",{for:"message",class:"rvt-label"},"Comments/Questions",-1)),p(e("textarea",{id:"message",class:c(["rvt-textarea",{"rvt-validation-danger":!i.Message}]),name:"Message","onUpdate:modelValue":t[6]||(t[6]=o=>a.Message=o),onInput:t[7]||(t[7]=o=>u("Message"))},null,34),[[v,a.Message]])]),M(F,{class:"rvt-button rvt-m-top-md",type:"submit",onClick:_(w,["prevent"]),disabled:y(m)},{default:V(()=>[S(f(y(m)?"Submitting Form":"Submit Form")+" ",1),y(m)?(l(),n("span",A)):d("",!0)]),_:1},8,["disabled"])],544)):d("",!0),r.status==="success"?(l(),n("div",L,[t[12]||(t[12]=e("h3",{class:"rvt-ts-md rvt-m-top-md bordered-heading"},"A team member will be in touch with you very soon. Thank you!",-1)),t[13]||(t[13]=e("p",{class:"rvt-m-all-none"},"The following information was sent:",-1)),e("table",U,[(l(!0),n(h,null,$(r.data,(o,b)=>(l(),n(h,null,[b!=="FormType"?(l(),n("tr",{key:b},[e("th",D,f(b),1),e("td",null,f(o),1)])):d("",!0)],64))),256))])],512)):d("",!0),r.status==="error"?(l(),n("div",R,[e("p",q,f(r.message),1),t[14]||(t[14]=e("button",{class:"rvt-alert__dismiss","data-rvt-alert-close":"",disabled:""},[e("span",{class:"rvt-sr-only"},"Dismiss this alert"),e("svg",{fill:"currentColor",width:"16",height:"16",viewBox:"0 0 16 16"},[e("path",{d:"m3.5 2.086 4.5 4.5 4.5-4.5L13.914 3.5 9.414 8l4.5 4.5-1.414 1.414-4.5-4.5-4.5 4.5L2.086 12.5l4.5-4.5-4.5-4.5L3.5 2.086Z"})])],-1))])):d("",!0)],64)}}},Z=T(z,[["__scopeId","data-v-b04d630c"]]);export{Z as default};
